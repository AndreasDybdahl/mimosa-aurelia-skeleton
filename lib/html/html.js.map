{"version":3,"sources":["/var/snap-ci/repo/src/html/html.js"],"names":[],"mappings":";;;MAII,gBAAgB;uBAihBJ,SAAS;;AA1GzB,WAAS,YAAY,CAAC,GAAG,EAAE,MAAM,EAAE;AACjC,QAAI,IAAI,GAAG,KAAK;QAAE,UAAU,GAAG,KAAK,CAAC;AACrC,QAAI,MAAM,GAAG,EAAE;QACb,CAAC;QAAE,GAAG;QAAE,IAAI;QAAE,YAAY,GAAG,CAAC;QAC9B,YAAY,GAAG,CAAC;QAChB,MAAM;QAAE,KAAK,CAAC;;AAEhB,SAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;AAC1C,UAAI,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACzB,UAAI,IAAI,KAAK,EAAI,QAAA,EAAW;AAC1B,UAAE,YAAY,CAAC;OAChB,MAAM,IAAI,IAAI,KAAK,EAAI,QAAA,EAAW;AACjC,UAAE,YAAY,CAAC;OAChB,MAAM,IAAI,IAAI,KAAK,EAAI,QAAA,IAAY,IAAI,EAAE;AACxC,cAAM,IAAI,IAAI,CAAC;OAChB,MAAM,IAAI,gBAAgB,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,EAAI,QAAA,EAAW;AAC3D,cAAM,IAAI,yBAAyB,CAAC,IAAI,CAAC,CAAC;AAC1C,iBAAS;OACV,MAAM,IAAI,AAAC,IAAI,IAAI,IAAI,GAAG,EAAI,SAAA,IAAe,EAAE,IAAI,IAAI,UAAU,IAAK,IAAI,IAAI,EAAI,SAAA,IAAa,IAAI,IAAI,GAAI,QAAA,CAAU,AAAC,EAAE;AACvH,cAAM,IAAI,sBAAsB,CAAC,IAAI,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC9D,iBAAS;OACV;AACD,YAAM,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;KACrC;;AAED,UAAM,GAAG,EAAE,MAAM,KAAK,QAAQ,IAAK,MAAM,KAAK,MAAM,IAAI,YAAY,GAAG,YAAY,CAAC,AAAC,CAAC;AACtF,SAAK,GAAG,MAAM,GAAG,GAAI,GAAG,IAAG,CAAC;;AAE5B,QAAI,EAAE,MAAM,GAAG,YAAY,GAAG,YAAY,CAAA,AAAC,EAAE;AAC3C,aAAO,KAAK,GAAG,MAAM,GAAG,KAAK,CAAC;KAC/B;;AAED,OAAG,GAAG,MAAM,CAAC;AACb,UAAM,GAAG,KAAK,CAAC;;AAEf,SAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;AAC1C,UAAI,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACzB,UAAI,AAAC,IAAI,KAAK,EAAI,QAAA,IAAY,MAAM,IAAM,IAAI,KAAK,EAAI,QAAA,IAAY,CAAC,MAAM,AAAC,EAAE;AAC3E,cAAM,IAAI,IAAI,CAAC;OAChB;AACD,YAAM,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;KACrC;;AAED,WAAO,MAAM,GAAG,KAAK,CAAC;GACvB;;AAED,WAAS,sBAAsB,CAAC,IAAI,EAAE,IAAI,EAAE;AAC1C,QAAI,GAAG,CAAC;;AAER,QAAI,IAAI,KAAK,CAAI,SAAA,EAAY;AAC3B,aAAO,KAAK,CAAC;KACd;;AAED,QAAI,IAAI,KAAK,EAAI,SAAA,EAAY;AAC3B,aAAO,KAAK,CAAC;KACd;;AAED,QAAI,IAAI,KAAK,CAAI,SAAA,EAAY;AAC3B,aAAO,KAAK,CAAC;KACd;;AAED,OAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CACpB,WAAW,EAAE,CAAC;AACjB,QAAI,IAAI,IAAI,IAAI,GAAG,GAAI,EAAE;AACvB,aAAO,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;KAC/C,MAAM,IAAI,IAAI,KAAK,CAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;AACnD,aAAO,KAAK,CAAC;KACd,MAAM,IAAI,IAAI,KAAK,EAAM,SAAA,EAAY;;AACpC,aAAO,OAAO,CAAC;KAChB,MAAM;AACL,aAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;KAC7C;GACF;;AAED,WAAS,yBAAyB,CAAC,IAAI,EAAE;AACvC,QAAI,IAAI,KAAK,EAAI,QAAA,EAAW;AAC1B,aAAO,MAAM,CAAC;KACf;;AAED,QAAI,IAAI,KAAK,EAAI,SAAA,EAAY;AAC3B,aAAO,KAAK,CAAC;KACd;;AAED,QAAI,IAAI,KAAK,EAAI,SAAA,EAAY;AAC3B,aAAO,KAAK,CAAC;KACd;;AAED,QAAI,IAAI,KAAK,IAAM,EAAE;AACnB,aAAO,SAAS,CAAC;KAClB;;AAED,QAAI,IAAI,KAAK,IAAM,EAAE;AACnB,aAAO,SAAS,CAAC;KAClB;;AAED,UAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;GACrD;;AAED,WAAS,gBAAgB,CAAC,EAAE,EAAE;AAC5B,WAAO,AAAC,EAAE,KAAK,EAAI,IAAM,EAAE,KAAK,EAAI,AAAC,IAAK,EAAE,KAAK,IAAM,AAAC,IAAK,EAAE,KAAK,IAAM,AAAC,CAAC;GAC7E;;AAED,WAAS,cAAc,CAAC,EAAE,EAAE;AAC1B,WAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAE;GAC/B;;AAEM,WAAS,SAAS,CAAC,IAAI,EAAE;;AAE9B,QAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,QAAI,IAAI,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;AACpC,QAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;;;;;AAK7B,QAAI,MAAM,GAAG,CAAC,CAAC;AACf,QAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,QAAI,IAAI,GAAG;;AAET,yDAAqD,EACrD,gBAAgB,CACjB,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,UAAS,GAAG,EAAE,KAAK,EAAE;AACrC,UAAI,SAAS,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM;UAC/B,OAAO,GAAG,SAAS,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM;UACzC,IAAI,GAAG,GAAG,CAAC,IAAI;UACf,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;AAE5C,YAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,KAAK,CAAA,CAAE,MAAM,CAAC;AAC7C,aAAO,OAAO,GAAG,KAAK,GAAG,qBAAqB,GAAG,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,WAAW,GAAG,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,IAAI,CAAC;KACnI,CAAC,CAAC,CAAC,MAAM,CAAC,CACT,EAAE,EACF,4BAA4B,GAAG,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,IAAI,GAAG,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,GAAG,UAAU,CACjH,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEd,WAAO,IAAI,CAAC;GACb;;;;;;;AA9iBG,sBAAgB,GAAG,CAAC,YAAW;AAEjC,YAAI,UAAU,GAAG,QAAQ,CAAC;AAC1B,YAAI,WAAW,GAAG,MAAM,CAAC;;AAEzB,YAAI,IAAI,GAAG;AACT,cAAI,EAAE,MAAM;AACZ,aAAG,EAAE,KAAK;AACV,cAAI,EAAE,MAAM;AACZ,eAAK,EAAE,OAAO;AACd,iBAAO,EAAE,SAAS;AAClB,iBAAO,EAAE,SAAS;SACnB,CAAC;;AAEF,iBAAS,MAAM,GAAG,EACjB;;AAED,cAAM,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,YAAY,GAAG;AAC/C,cAAI,CAAC,MAAM,GAAG;AACV,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,eAAG,EAAE,CAAC;AACN,gBAAI,EAAE,IAAI;AACV,uBAAW,EAAE,IAAI;AACjB,wBAAY,EAAE,IAAI;AAClB,mBAAO,EAAE,IAAI;AACb,oBAAQ,EAAE,KAAK;AACf,oBAAQ,EAAE,KAAK;AACf,kBAAM,EAAE,EAAE;AACV,gBAAI,EAAE,KAAK;AACX,mBAAO,EAAE,EAAE;WACd,CAAC;SACH,CAAC;;AAEF,cAAM,CAAC,SAAS,CAAC,WAAW,GAAG,SAAS,kBAAkB,CAAE,KAAK,EAAE;AACjE,cAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;AAC7B,cAAI,CAAC,MAAM,CAAC,IAAI,GAAG,AAAC,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,GACzC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,GACzC,KAAK,CAAC;;AAEV,iBAAO,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;AACzE,gBAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;WAC1B;SACF,CAAC;;AAEF,cAAM,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,YAAY,CAAE,IAAI,EAAE;AACpD,cAAI,CAAC,KAAK,EAAE,CAAC;AACb,cAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AACvB,iBAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;SAC5B,CAAC;;AAEF,cAAM,CAAC,SAAS,CAAC,MAAM,GAAG,SAAS,aAAa,GAAI;AAClD,kBAAQ,IAAI,CAAC,MAAM,CAAC,IAAI;AACtB,iBAAK,IAAI,CAAC,IAAI;AACZ,qBAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAAA,AACtC,iBAAK,IAAI,CAAC,GAAG;AACX,qBAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAAA,AACrC,iBAAK,IAAI,CAAC,IAAI;AACZ,qBAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAAA,AACtC,iBAAK,IAAI,CAAC,KAAK;AACb,qBAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAAA,AACvC,iBAAK,IAAI,CAAC,OAAO;AACf,qBAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAAA,AACzC,iBAAK,IAAI,CAAC,OAAO;AACf,qBAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAAA,WAC1C;SACF,CAAC;;AAEF,cAAM,CAAC,yBAAyB,GAAG,mBAAmB,CAAC;AACvD,cAAM,CAAC,SAAS,CAAC,UAAU,GAAG,SAAS,iBAAiB,GAAG;AACzD,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,cAAI,QAAQ,CAAC;AACb,cAAI,KAAK,CAAC,QAAQ,EAAE;AAClB,kBAAM,CAAC,yBAAyB,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACvD,oBAAQ,GAAG,MAAM,CAAC,yBAAyB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC7D,oBAAQ,GAAG,AAAC,QAAQ,GAChB,QAAQ,CAAC,KAAK,GACd,CAAC,CAAC,CAAC;WACR,MAAM;AACL,oBAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;WAC/C;AACD,cAAI,IAAI,GAAG,AAAC,QAAQ,KAAK,CAAC,CAAC,GAAI,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;AAC9H,cAAI,QAAQ,GAAG,CAAC,IAAI,KAAK,CAAC,IAAI,EAAE;AAC9B,oBAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;WAC9B;AACD,cAAI,QAAQ,GAAG,CAAC,EAAE;AAChB,gBAAI,KAAK,CAAC,QAAQ,EAAE;AAClB,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,qBAAO;aACR;AACD,gBAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AACtB,mBAAK,CAAC,WAAW,GAAG,EAAE,CAAC;aACxB;AACD,iBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AAC3E,iBAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;WAC/B,MAAM;AACL,gBAAI,KAAK,CAAC,WAAW,EAAE;AACrB,mBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;AAClE,kBAAI,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAClC,mBAAK,CAAC,WAAW,GAAG,IAAI,CAAC;aAC1B,MAAM;AACL,kBAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;aAClD;AACD,gBAAI,IAAI,KAAK,EAAE,EAAE;AACf,kBAAI,CAAC,MAAM,CAAC;AACV,oBAAI,EAAE,IAAI,CAAC,IAAI;AACf,oBAAI,EAAE,IAAI;eACX,CAAC,CAAC;aACJ;AACD,iBAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;AACzB,iBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC;WACvB;SACF,CAAC;;AAEF,cAAM,CAAC,WAAW,GAAG,qCAAqC,CAAC;AAC3D,cAAM,CAAC,SAAS,CAAC,SAAS,GAAG,SAAS,gBAAgB,GAAG;AACvD,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,gBAAM,CAAC,WAAW,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACzC,cAAI,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAChD,cAAI,KAAK,EAAE;AACT,gBAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,EAAE;AAChD,mBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;AAC1B,mBAAK,CAAC,GAAG,IAAI,CAAC,CAAC;AACf,qBAAO;aACR;AACD,gBAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,UAAU,EAAE;AACrD,mBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;AACxB,mBAAK,CAAC,GAAG,IAAI,CAAC,CAAC;AACf,qBAAO;aACR;AACD,gBAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,UAAU,EAAE;AACrD,mBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;AAC1B,mBAAK,CAAC,GAAG,IAAI,CAAC,CAAC;AACf,qBAAO;aACR;AACD,gBAAI,CAAC,KAAK,CAAC,IAAI,IAAI,AAAC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,KAAM,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;;AAEtE,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,qBAAO;aACR;AACD,gBAAI,GAAG,CAAC;AACR,gBAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACpB,mBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,iBAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aAC/C,MAAM;AACL,mBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,iBAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;aAChB;AACD,iBAAK,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AAC7B,gBAAI,GAAG,GAAG;AACR,kBAAI,EAAE,IAAI,CAAC,GAAG;AACd,kBAAI,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACzB,iBAAG,EAAE,GAAG;aACT,CAAC;AACF,gBAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,EAAE;AAC5B,mBAAK,CAAC,OAAO,GAAG,GAAG,CAAC;aACrB;AACD,gBAAI,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,QAAQ,EAAE;AACvC,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;aACvB,MAAM,IAAI,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,SAAS,EAAE;AAC/C,mBAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;aACxB;AACD,gBAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,EAAE;AAC5B,kBAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;aACzB,MAAM;AACL,kBAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aAClB;WACF,MAAM;;;AAGL,iBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;WACvB;SACF,CAAC;;AAEF,cAAM,CAAC,qBAAqB,GAAG,wBAAwB,CAAC;AACxD,cAAM,CAAC,SAAS,CAAC,mBAAmB,GAAG,SAAS,0BAA0B,GAAG;AAC3E,gBAAM,CAAC,qBAAqB,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;AACzD,cAAI,KAAK,GAAG,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAChE,cAAI,CAAC,KAAK,EAAE;AACV,mBAAO,IAAI,CAAC;WACb;AACD,cAAI,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,qBAAqB,CAAC,SAAS,EAAE;AAChF,mBAAO,IAAI,CAAC;WACb;AACD,iBAAO;AACL,iBAAK,EAAE,KAAK,CAAC,CAAC,CAAC;AACf,gBAAI,EAAE,KAAK,CAAC,CAAC,CAAC;WACf,CAAC;SACH,CAAC;AACF,cAAM,CAAC,sBAAsB,GAAG,kDAAkD,CAAC;AACnF,cAAM,CAAC,2BAA2B,GAAG,oBAAoB,CAAC;AAC1D,cAAM,CAAC,SAAS,CAAC,oBAAoB,GAAG,SAAS,2BAA2B,GAAG;AAC7E,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,gBAAM,CAAC,sBAAsB,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACpD,cAAI,KAAK,GAAG,MAAM,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC3D,cAAI,CAAC,KAAK,EAAE;AACV,gBAAI,CAAC,KAAK,CAAC,IAAI,EAAE;AACf,qBAAO,IAAI,CAAC;aACb;AACD,kBAAM,CAAC,2BAA2B,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACzD,iBAAK,GAAG,MAAM,CAAC,2BAA2B,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC5D,gBAAI,CAAC,KAAK,EAAE;AACV,qBAAO,IAAI,CAAC;aACb;;AAED,mBAAO;AACL,mBAAK,EAAE,KAAK,CAAC,CAAC,CAAC;AACf,mBAAK,EAAE,AAAC,KAAK,CAAC,CAAC,CAAC,KAAK,EAAE,GAAI,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI;AAC1C,mBAAK,EAAE,KAAK,CAAC,KAAK;AAClB,oBAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;aACxB,CAAC;WACH;AACD,cAAI,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,sBAAsB,CAAC,SAAS,EAAE;AAC3E,mBAAO,IAAI,CAAC;WACb;;AAED,iBAAO;AACL,iBAAK,EAAE,KAAK,CAAC,CAAC,CAAC;AACf,iBAAK,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AACvC,iBAAK,EAAE,KAAK,CAAC,KAAK;AAClB,kBAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;WACxB,CAAC;SACH,CAAC;AACF,cAAM,CAAC,uBAAuB,GAAG,eAAe,CAAC;AACjD,cAAM,CAAC,sBAAsB,GAAG,iBAAiB,CAAC;AAClD,cAAM,CAAC,SAAS,CAAC,UAAU,GAAG,SAAS,iBAAiB,GAAG;AACzD,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,cAAI,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;AAChD,cAAI,CAAC,SAAS,IAAI,SAAS,CAAC,IAAI,KAAK,GAAG,EAAE;AACxC,kBAAM,CAAC,sBAAsB,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACpD,gBAAI,kBAAkB,GAAG,MAAM,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACxE,gBAAI,kBAAkB,IAAI,kBAAkB,CAAC,KAAK,KAAK,KAAK,CAAC,GAAG,EAAE;AAChE,kBAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;AAC3G,qBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,uBAAO;eACR;AACD,mBAAK,CAAC,OAAO,CAAC,GAAG,IAAI,kBAAkB,CAAC,CAAC,CAAC,CAAC;;AAE3C,kBAAI,CAAC,MAAM,CAAC;AACV,oBAAI,EAAE,IAAI,CAAC,GAAG;AACd,oBAAI,EAAE,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI;AAC9B,mBAAG,EAAE,IAAI;eACV,CAAC,CAAC;AACH,mBAAK,CAAC,GAAG,IAAI,kBAAkB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;aAC3C;AACD,gBAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AAClD,gBAAI,QAAQ,GAAG,CAAC,EAAE;AAChB,kBAAI,KAAK,CAAC,IAAI,EAAE;;AACd,qBAAK,CAAC,OAAO,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClD,qBAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;AAC9B,uBAAO;eACR;AACD,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;aACvB,MAAM;;AAEL,mBAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;AACzB,mBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;aACxB;AACD,mBAAO;WACR;AACD,cAAI,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;AAC3E,iBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,mBAAO,IAAI,CAAC;WACb;AACD,eAAK,CAAC,GAAG,IAAI,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC;AACpC,cAAI,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;AAClD,cAAI,UAAU,EAAE;AACd,gBAAI,CAAC,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,GAAG,GAAG,UAAU,CAAC,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;AAC5E,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,mBAAK,CAAC,GAAG,IAAI,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC;AACpC,qBAAO;aACR;AACD,iBAAK,CAAC,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC;WACtC,MAAM;AACL,kBAAM,CAAC,uBAAuB,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACrD,gBAAI,MAAM,CAAC,uBAAuB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;AACnD,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,mBAAK,CAAC,GAAG,IAAI,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC;AACpC,qBAAO;aACR;AACD,sBAAU,GAAG;AACX,mBAAK,EAAE,EAAE;AACT,mBAAK,EAAE,IAAI;aACZ,CAAC;WACH;AACD,eAAK,CAAC,OAAO,CAAC,GAAG,IAAI,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;;AAExD,cAAI,CAAC,aAAa,CAAC;AACjB,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,gBAAI,EAAE,SAAS,CAAC,IAAI;AACpB,gBAAI,EAAE,UAAU,CAAC,KAAK;AACtB,eAAG,EAAE,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC;WAC3C,CAAC,CAAC;SACJ,CAAC;;AAEF,cAAM,CAAC,wBAAwB,GAAG,UAAU,CAAC;AAC7C,cAAM,CAAC,SAAS,CAAC,WAAW,GAAG,SAAS,kBAAkB,GAAG;AAC3D,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,cAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AACpD,cAAI,QAAQ,GAAG,CAAC,IAAI,KAAK,CAAC,IAAI,EAAE;AAC9B,oBAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;WAC9B;AACD,cAAI,QAAQ,GAAG,CAAC,EAAE;AAChB,kBAAM,CAAC,wBAAwB,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACtD,gBAAI,oBAAoB,GAAG,MAAM,CAAC,wBAAwB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC5E,gBAAI,oBAAoB,EAAE;AACxB,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,qBAAO;aACR;AACD,gBAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AACtB,mBAAK,CAAC,WAAW,GAAG,EAAE,CAAC;aACxB;AACD,iBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACxE,iBAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;AAC9B,iBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;WACvB,MAAM;AACL,gBAAI,IAAI,CAAC;AACT,gBAAI,KAAK,CAAC,WAAW,EAAE;AACrB,mBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;AAClE,kBAAI,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAClC,mBAAK,CAAC,WAAW,GAAG,IAAI,CAAC;aAC1B,MAAM;AACL,kBAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;aAClD;AACD,gBAAI,CAAC,MAAM,CAAC;AACV,kBAAI,EAAE,IAAI,CAAC,KAAK;AAChB,kBAAI,EAAE,IAAI;aACX,CAAC,CAAC;AACH,iBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,iBAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;WAC1B;SACF,CAAC;;AAEF,cAAM,CAAC,SAAS,CAAC,aAAa,GAAG,SAAS,oBAAoB,GAAG;AAC/D,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,cAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AAClD,cAAI,QAAQ,GAAG,CAAC,IAAI,KAAK,CAAC,IAAI,EAAE;AAC9B,oBAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;WAC9B;AACD,cAAI,QAAQ,GAAG,CAAC,EAAE;AAChB,kBAAM,CAAC,wBAAwB,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACtD,gBAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AACtB,mBAAK,CAAC,WAAW,GAAG,EAAE,CAAC;aACxB;AACD,iBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACxE,iBAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;AAC9B,iBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;WACvB,MAAM;AACL,gBAAI,IAAI,CAAC;AACT,gBAAI,KAAK,CAAC,WAAW,EAAE;AACrB,mBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;AAClE,kBAAI,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAClC,mBAAK,CAAC,WAAW,GAAG,IAAI,CAAC;aAC1B,MAAM;AACL,kBAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;aAClD;AACD,gBAAI,CAAC,MAAM,CAAC;AACV,kBAAI,EAAE,IAAI,CAAC,OAAO;AAClB,kBAAI,EAAE,IAAI;aACX,CAAC,CAAC;AACH,iBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,iBAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;WAC1B;SACF,CAAC;;AAEF,cAAM,CAAC,0BAA0B,GAAG,UAAU,CAAC;AAC/C,cAAM,CAAC,SAAS,CAAC,aAAa,GAAG,SAAS,oBAAoB,GAAG;AAC/D,cAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACxB,cAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AACpD,cAAI,QAAQ,GAAG,CAAC,IAAI,KAAK,CAAC,IAAI,EAAE;AAC9B,oBAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;WAC9B;AACD,cAAI,QAAQ,GAAG,CAAC,EAAE;AAChB,kBAAM,CAAC,0BAA0B,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC;AACxD,gBAAI,sBAAsB,GAAG,MAAM,CAAC,0BAA0B,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAChF,gBAAI,sBAAsB,EAAE;AAC1B,mBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;AACtB,qBAAO;aACR;AACD,gBAAI,CAAC,KAAK,CAAC,WAAW,EAAE;AACtB,mBAAK,CAAC,WAAW,GAAG,EAAE,CAAC;aACxB;AACD,iBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACxE,iBAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;AAC9B,iBAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;WACvB,MAAM;AACL,gBAAI,IAAI,CAAC;AACT,gBAAI,KAAK,CAAC,WAAW,EAAE;AACrB,mBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;AAClE,kBAAI,GAAG,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAClC,mBAAK,CAAC,WAAW,GAAG,IAAI,CAAC;aAC1B,MAAM;AACL,kBAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;aAClD;;AAED,gBAAI,CAAC,MAAM,CAAC;AACV,kBAAI,EAAE,IAAI,CAAC,OAAO;AAClB,kBAAI,EAAE,IAAI;aACX,CAAC,CAAC;AACH,iBAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,iBAAK,CAAC,GAAG,GAAG,QAAQ,GAAG,CAAC,CAAC;WAC1B;SACF,CAAC;;AAEF,cAAM,CAAC,SAAS,CAAC,MAAM,GAAG,SAAS,aAAa,CAAC,KAAK,EAAE,EAEvD,CAAC;;AAEF,cAAM,CAAC,SAAS,CAAC,aAAa,GAAG,SAAS,oBAAoB,CAAC,KAAK,EAAE;;AAEpE,cAAI,KAAK,CAAC,IAAI,KAAK,MAAM,IAAI,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,WAAW,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,UAAU,EAAE;AAC9H,gBAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;AACvB,kBAAI,EAAE,KAAK,CAAC,IAAI;AAChB,iBAAG,EAAE,KAAK,CAAC,GAAG;aACf,CAAC,CAAC;WACJ;SACF,CAAA;;AAED,eAAO,SAAS,gBAAgB,CAAC,IAAI,EAAE;AACrC,iBAAO,IAAI,MAAM,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACjC,CAAC;OAEH,CAAA,EAAG;AAyIH,OAAC","file":"/var/snap-ci/repo/src/html/html.js","sourcesContent":["/*\n  HTML plugin\n*/\n\nvar findDependencies = (function() {\n\n  var IMPORT_TAG = 'import';\n  var IMPORT_ATTR = 'from';\n\n  var Mode = {\n    Text: 'text',\n    Tag: 'tag',\n    Attr: 'attr',\n    CData: 'cdata',\n    Doctype: 'doctype',\n    Comment: 'comment'\n  };\n\n  function Parser() {\n  }\n\n  Parser.prototype.reset = function Parser$reset() {\n    this._state = {\n        mode: Mode.Text,\n        pos: 0,\n        data: null,\n        pendingText: null,\n        pendingWrite: null,\n        lastTag: null,\n        isScript: false,\n        needData: false,\n        output: [],\n        done: false,\n        imports: []\n    };\n  };\n\n  Parser.prototype._parseChunk = function Parser$_parseChunk (chunk) {\n    this._state.needData = false;\n    this._state.data = (this._state.data !== null) \n      ? this._state.data.substr(this.pos) + chunk\n      : chunk;\n\n    while (this._state.pos < this._state.data.length && !this._state.needData) {\n      this._parse(this._state);\n    }\n  };\n\n  Parser.prototype.parse = function Parser$parse (html) {\n    this.reset();\n    this._parseChunk(html);\n    return this._state.imports;\n  };\n\n  Parser.prototype._parse = function Parser$_parse () {\n    switch (this._state.mode) {\n      case Mode.Text:\n        return this._parseText(this._state);\n      case Mode.Tag:\n        return this._parseTag(this._state);\n      case Mode.Attr:\n        return this._parseAttr(this._state);\n      case Mode.CData:\n        return this._parseCData(this._state);\n      case Mode.Doctype:\n        return this._parseDoctype(this._state);\n      case Mode.Comment:\n        return this._parseComment(this._state);\n    }\n  };\n\n  Parser._re_parseText_scriptClose = /<\\s*\\/\\s*script/ig;\n  Parser.prototype._parseText = function Parser$_parseText() {\n    var state = this._state;\n    var foundPos;\n    if (state.isScript) {\n      Parser._re_parseText_scriptClose.lastIndex = state.pos;\n      foundPos = Parser._re_parseText_scriptClose.exec(state.data);\n      foundPos = (foundPos)\n        ? foundPos.index\n        : -1;\n    } else {\n      foundPos = state.data.indexOf('<', state.pos);\n    }\n    var text = (foundPos === -1) ? state.data.substring(state.pos, state.data.length) : state.data.substring(state.pos, foundPos);\n    if (foundPos < 0 && state.done) {\n      foundPos = state.data.length;\n    }\n    if (foundPos < 0) {\n      if (state.isScript) {\n        state.needData = true;\n        return;\n      }\n      if (!state.pendingText) {\n        state.pendingText = [];\n      }\n      state.pendingText.push(state.data.substring(state.pos, state.data.length));\n      state.pos = state.data.length;\n    } else {\n      if (state.pendingText) {\n        state.pendingText.push(state.data.substring(state.pos, foundPos));\n        text = state.pendingText.join('');\n        state.pendingText = null;\n      } else {\n        text = state.data.substring(state.pos, foundPos);\n      }\n      if (text !== '') {\n        this._write({\n          type: Mode.Text,\n          data: text\n        });\n      }\n      state.pos = foundPos + 1;\n      state.mode = Mode.Tag;\n    }\n  };\n\n  Parser.re_parseTag = /\\s*(\\/?)\\s*([^\\s>\\/]+)(\\s*)\\??(>?)/g;\n  Parser.prototype._parseTag = function Parser$_parseTag() {\n    var state = this._state;\n    Parser.re_parseTag.lastIndex = state.pos;\n    var match = Parser.re_parseTag.exec(state.data);\n    if (match) {\n      if (!match[1] && match[2].substr(0, 3) === '!--') {\n        state.mode = Mode.Comment;\n        state.pos += 3;\n        return;\n      }\n      if (!match[1] && match[2].substr(0, 8) === '![CDATA[') {\n        state.mode = Mode.CData;\n        state.pos += 8;\n        return;\n      }\n      if (!match[1] && match[2].substr(0, 8) === '!DOCTYPE') {\n        state.mode = Mode.Doctype;\n        state.pos += 8;\n        return;\n      }\n      if (!state.done && (state.pos + match[0].length) === state.data.length) {\n        //We're at the and of the data, might be incomplete\n        state.needData = true;\n        return;\n      }\n      var raw;\n      if (match[4] === '>') {\n        state.mode = Mode.Text;\n        raw = match[0].substr(0, match[0].length - 1);\n      } else {\n        state.mode = Mode.Attr;\n        raw = match[0];\n      }\n      state.pos += match[0].length;\n      var tag = {\n        type: Mode.Tag,\n        name: match[1] + match[2],\n        raw: raw\n      };\n      if (state.mode === Mode.Attr) {\n        state.lastTag = tag;\n      }\n      if (tag.name.toLowerCase() === 'script') {\n        state.isScript = true;\n      } else if (tag.name.toLowerCase() === '/script') {\n        state.isScript = false;\n      }\n      if (state.mode === Mode.Attr) {\n        this._writePending(tag);\n      } else {\n        this._write(tag);\n      }\n    } else {\n      //TODO: end of tag?\n      //TODO: push to pending?\n      state.needData = true;\n    }\n  };\n\n  Parser.re_parseAttr_findName = /\\s*([^=<>\\s'\"\\/]+)\\s*/g;\n  Parser.prototype._parseAttr_findName = function Parser$_parseAttr_findName() {\n    Parser.re_parseAttr_findName.lastIndex = this._state.pos;\n    var match = Parser.re_parseAttr_findName.exec(this._state.data);\n    if (!match) {\n      return null;\n    }\n    if (this._state.pos + match[0].length !== Parser.re_parseAttr_findName.lastIndex) {\n      return null;\n    }\n    return {\n      match: match[0],\n      name: match[1]\n    };\n  };\n  Parser.re_parseAttr_findValue = /\\s*=\\s*(?:'([^']*)'|\"([^\"]*)\"|([^'\"\\s\\/>]+))\\s*/g;\n  Parser.re_parseAttr_findValue_last = /\\s*=\\s*['\"]?(.*)$/g;\n  Parser.prototype._parseAttr_findValue = function Parser$_parseAttr_findValue() {\n    var state = this._state;\n    Parser.re_parseAttr_findValue.lastIndex = state.pos;\n    var match = Parser.re_parseAttr_findValue.exec(state.data);\n    if (!match) {\n      if (!state.done) {\n        return null;\n      }\n      Parser.re_parseAttr_findValue_last.lastIndex = state.pos;\n      match = Parser.re_parseAttr_findValue_last.exec(state.data);\n      if (!match) {\n        return null;\n      }\n\n      return {\n        match: match[0],\n        value: (match[1] !== '') ? match[1] : null,\n        index: match.index,\n        length: match[0].length\n      };\n    }\n    if (state.pos + match[0].length !== Parser.re_parseAttr_findValue.lastIndex) {\n      return null;\n    }\n\n    return {\n      match: match[0],\n      value: match[1] || match[2] || match[3],\n      index: match.index,\n      length: match[0].length\n    };\n  };\n  Parser.re_parseAttr_splitValue = /\\s*=\\s*['\"]?/g;\n  Parser.re_parseAttr_selfClose = /(\\s*\\/\\s*)(>?)/g;\n  Parser.prototype._parseAttr = function Parser$_parseAttr() {\n    var state = this._state;\n    var name_data = this._parseAttr_findName(state);\n    if (!name_data || name_data.name === '?') {\n      Parser.re_parseAttr_selfClose.lastIndex = state.pos;\n      var matchTrailingSlash = Parser.re_parseAttr_selfClose.exec(state.data);\n      if (matchTrailingSlash && matchTrailingSlash.index === state.pos) {\n        if (!state.done && !matchTrailingSlash[2] && state.pos + matchTrailingSlash[0].length === state.data.length) {\n          state.needData = true;\n          return;\n        }\n        state.lastTag.raw += matchTrailingSlash[1];\n        // state.output.push({ type: Mode.Tag, name: '/' + state.lastTag.name, raw: null });\n        this._write({\n          type: Mode.Tag,\n          name: '/' + state.lastTag.name,\n          raw: null\n        });\n        state.pos += matchTrailingSlash[1].length;\n      }\n      var foundPos = state.data.indexOf('>', state.pos);\n      if (foundPos < 0) {\n        if (state.done) { //TODO: is this needed?\n          state.lastTag.raw += state.data.substr(state.pos);\n          state.pos = state.data.length;\n          return;\n        }\n        state.needData = true;\n      } else {\n        // state.lastTag = null;\n        state.pos = foundPos + 1;\n        state.mode = Mode.Text;\n      }\n      return;\n    }\n    if (!state.done && state.pos + name_data.match.length === state.data.length) {\n      state.needData = true;\n      return null;\n    }\n    state.pos += name_data.match.length;\n    var value_data = this._parseAttr_findValue(state);\n    if (value_data) {\n      if (!state.done && state.pos + value_data.match.length === state.data.length) {\n        state.needData = true;\n        state.pos -= name_data.match.length;\n        return;\n      }\n      state.pos += value_data.match.length;\n    } else {\n      Parser.re_parseAttr_splitValue.lastIndex = state.pos;\n      if (Parser.re_parseAttr_splitValue.exec(state.data)) {\n        state.needData = true;\n        state.pos -= name_data.match.length;\n        return;\n      }\n      value_data = {\n        match: '',\n        value: null\n      };\n    }\n    state.lastTag.raw += name_data.match + value_data.match;\n\n    this._writePending({\n      type: Mode.Attr,\n      name: name_data.name,\n      data: value_data.value,\n      pos: [value_data.index, value_data.length]\n    });\n  };\n\n  Parser.re_parseCData_findEnding = /\\]{1,2}$/;\n  Parser.prototype._parseCData = function Parser$_parseCData() {\n    var state = this._state;\n    var foundPos = state.data.indexOf(']]>', state.pos);\n    if (foundPos < 0 && state.done) {\n      foundPos = state.data.length;\n    }\n    if (foundPos < 0) {\n      Parser.re_parseCData_findEnding.lastIndex = state.pos;\n      var matchPartialCDataEnd = Parser.re_parseCData_findEnding.exec(state.data);\n      if (matchPartialCDataEnd) {\n        state.needData = true;\n        return;\n      }\n      if (!state.pendingText) {\n        state.pendingText = [];\n      }\n      state.pendingText.push(state.data.substr(state.pos, state.data.length));\n      state.pos = state.data.length;\n      state.needData = true;\n    } else {\n      var text;\n      if (state.pendingText) {\n        state.pendingText.push(state.data.substring(state.pos, foundPos));\n        text = state.pendingText.join('');\n        state.pendingText = null;\n      } else {\n        text = state.data.substring(state.pos, foundPos);\n      }\n      this._write({\n        type: Mode.CData,\n        data: text\n      });\n      state.mode = Mode.Text;\n      state.pos = foundPos + 3;\n    }\n  };\n\n  Parser.prototype._parseDoctype = function Parser$_parseDoctype() {\n    var state = this._state;\n    var foundPos = state.data.indexOf('>', state.pos);\n    if (foundPos < 0 && state.done) {\n      foundPos = state.data.length;\n    }\n    if (foundPos < 0) {\n      Parser.re_parseCData_findEnding.lastIndex = state.pos;\n      if (!state.pendingText) {\n        state.pendingText = [];\n      }\n      state.pendingText.push(state.data.substr(state.pos, state.data.length));\n      state.pos = state.data.length;\n      state.needData = true;\n    } else {\n      var text;\n      if (state.pendingText) {\n        state.pendingText.push(state.data.substring(state.pos, foundPos));\n        text = state.pendingText.join('');\n        state.pendingText = null;\n      } else {\n        text = state.data.substring(state.pos, foundPos);\n      }\n      this._write({\n        type: Mode.Doctype,\n        data: text\n      });\n      state.mode = Mode.Text;\n      state.pos = foundPos + 1;\n    }\n  };\n\n  Parser.re_parseComment_findEnding = /\\-{1,2}$/;\n  Parser.prototype._parseComment = function Parser$_parseComment() {\n    var state = this._state;\n    var foundPos = state.data.indexOf('-->', state.pos);\n    if (foundPos < 0 && state.done) {\n      foundPos = state.data.length;\n    }\n    if (foundPos < 0) {\n      Parser.re_parseComment_findEnding.lastIndex = state.pos;\n      var matchPartialCommentEnd = Parser.re_parseComment_findEnding.exec(state.data);\n      if (matchPartialCommentEnd) {\n        state.needData = true;\n        return;\n      }\n      if (!state.pendingText) {\n        state.pendingText = [];\n      }\n      state.pendingText.push(state.data.substr(state.pos, state.data.length));\n      state.pos = state.data.length;\n      state.needData = true;\n    } else {\n      var text;\n      if (state.pendingText) {\n        state.pendingText.push(state.data.substring(state.pos, foundPos));\n        text = state.pendingText.join('');\n        state.pendingText = null;\n      } else {\n        text = state.data.substring(state.pos, foundPos);\n      }\n      // state.output.push({ type: Mode.Comment, data: text });\n      this._write({\n        type: Mode.Comment,\n        data: text\n      });\n      state.mode = Mode.Text;\n      state.pos = foundPos + 3;\n    }\n  };\n\n  Parser.prototype._write = function Parser$_write(write) {\n    //console.log(write);\n  };\n\n  Parser.prototype._writePending = function Parser$_writePending(write) {\n    //console.log('pending: ', write);\n    if (write.type === 'attr' && write.name.toLowerCase() === IMPORT_ATTR && this._state.lastTag.name.toLowerCase() === IMPORT_TAG) {\n      this._state.imports.push({\n        path: write.data,\n        pos: write.pos\n      });\n    }\n  }\n\n  return function findDependencies(html) {\n    return new Parser().parse(html);\n  };\n  \n})();\n\nfunction escapeString(str, quotes) {\n  var json = false, escapeless = false;\n  var result = '',\n    i, len, code, singleQuotes = 0,\n    doubleQuotes = 0,\n    single, quote;\n\n  for (i = 0, len = str.length; i < len; ++i) {\n    code = str.charCodeAt(i);\n    if (code === 0x27 /* ' */ ) {\n      ++singleQuotes;\n    } else if (code === 0x22 /* \" */ ) {\n      ++doubleQuotes;\n    } else if (code === 0x2F /* / */ && json) {\n      result += '\\\\';\n    } else if (isLineTerminator(code) || code === 0x5C /* \\ */ ) {\n      result += escapeDisallowedCharacter(code);\n      continue;\n    } else if ((json && code < 0x20 /* SP */ ) || !(json || escapeless || (code >= 0x20 /* SP */ && code <= 0x7E /* ~ */ ))) {\n      result += escapeAllowedCharacter(code, str.charCodeAt(i + 1));\n      continue;\n    }\n    result += String.fromCharCode(code);\n  }\n\n  single = !(quotes === 'double' || (quotes === 'auto' && doubleQuotes < singleQuotes));\n  quote = single ? '\\'' : '\"';\n\n  if (!(single ? singleQuotes : doubleQuotes)) {\n    return quote + result + quote;\n  }\n\n  str = result;\n  result = quote;\n\n  for (i = 0, len = str.length; i < len; ++i) {\n    code = str.charCodeAt(i);\n    if ((code === 0x27 /* ' */ && single) || (code === 0x22 /* \" */ && !single)) {\n      result += '\\\\';\n    }\n    result += String.fromCharCode(code);\n  }\n\n  return result + quote;\n}\n\nfunction escapeAllowedCharacter(code, next) {\n  var hex;\n\n  if (code === 0x08 /* \\b */ ) {\n    return '\\\\b';\n  }\n\n  if (code === 0x0C /* \\f */ ) {\n    return '\\\\f';\n  }\n\n  if (code === 0x09 /* \\t */ ) {\n    return '\\\\t';\n  }\n\n  hex = code.toString(16)\n    .toUpperCase();\n  if (json || code > 0xFF) {\n    return '\\\\u' + '0000'.slice(hex.length) + hex;\n  } else if (code === 0x0000 && !isDecimalDigit(next)) {\n    return '\\\\0';\n  } else if (code === 0x000B /* \\v */ ) { // '\\v'\n    return '\\\\x0B';\n  } else {\n    return '\\\\x' + '00'.slice(hex.length) + hex;\n  }\n}\n\nfunction escapeDisallowedCharacter(code) {\n  if (code === 0x5C /* \\ */ ) {\n    return '\\\\\\\\';\n  }\n\n  if (code === 0x0A /* \\n */ ) {\n    return '\\\\n';\n  }\n\n  if (code === 0x0D /* \\r */ ) {\n    return '\\\\r';\n  }\n\n  if (code === 0x2028) {\n    return '\\\\u2028';\n  }\n\n  if (code === 0x2029) {\n    return '\\\\u2029';\n  }\n\n  throw new Error('Incorrectly classified character');\n}\n\nfunction isLineTerminator(ch) {\n  return (ch === 0x0A) || (ch === 0x0D) || (ch === 0x2028) || (ch === 0x2029);\n}\n\nfunction isDecimalDigit(ch) {\n  return (ch >= 48 && ch <= 57);   // 0..9\n}\n\nexport function translate(load) {\n  //debugger;\n  var source = load.source;\n  var deps = findDependencies(source);\n  load.metadata.format = 'cjs';\n  // load.metadata.deps = ['html/generate'].concat(deps.map(function(dep) {\n  //   return dep.path;\n  // }));\n\n  var offset = 0;\n  var name = load.name.split('!')[0];\n  var code = [\n    //\"debugger;\",\n    \"var generate = require('html/generate')['default'];\",\n    \"var deps = [];\"\n  ].concat(deps.map(function(dep, index) {\n    var pos_start = dep.pos[0] - offset,\n        pos_end = pos_start + dep.pos[1] - offset,\n        path = dep.path,\n        exact = source.indexOf(path, pos_start);\n    //source = source.substring(0, exact) + '#' + index + source.substring(exact + path.length);\n    offset += path.length - ('$' + index).length;\n    return 'deps[' + index + '] = { dep: require(' + escapeString(path, 'single') + '), path: ' + escapeString(path, 'single') + '};';\n  })).concat([\n    \"\",\n    \"module.exports = generate(\" + escapeString(name, 'single') + \", \" + escapeString(source, 'single') + \", deps);\"\n  ]).join('\\n');\n\n  return code;\n};"]}