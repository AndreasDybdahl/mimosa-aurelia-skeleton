{"version":3,"sources":["/var/snap-ci/repo/src/app/resource-pool/services/resource-pool.js"],"names":[],"mappings":";;;MAAQ,QAAQ,yCAEH,YAAY;;;;AAFjB,cAAQ,qBAAR,QAAQ;;;;;;;AAEH,kBAAY;AACZ,iBADA,YAAY;gCAAZ,YAAY;;AAErB,cAAI,CAAC,KAAK,GAAG,EAAE,CAAC;SACjB;;6BAHU,YAAY;AAKvB,aAAG;mBAAA,aAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE;AAC1B,kBAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACrD,kBAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;AAC1B,uBAAO,MAAM,GAAG,MAAM,EAAE,GAAG,IAAI,CAAC;eACjC,MAAM;AACL,uBAAO,SAAS,CAAC,KAAK,EAAE,CAAC;eAC1B;aACF;;;;AAED,oBAAU;mBAAA,oBAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE;AACjC,kBAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;AAClD,kBAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;AACpC,qBAAO,QAAQ,CAAC;aACjB;;;;AAED,cAAI;mBAAA,cAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE;AAC7B,kBAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACrD,uBAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC1B;;;;AAED,uBAAa;mBAAA,uBAAC,QAAQ,EAAE,IAAI,EAAE;AAC5B,kBAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAChC,kBAAI,CAAC,IAAI,EAAE;AACT,oBAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;eAClC;;AAED,kBAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3B,kBAAI,CAAC,SAAS,EAAE;AACd,yBAAS,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;eAC7B;;AAED,qBAAO,SAAS,CAAC;aAClB;;;;;;eArCU,YAAY","file":"/var/snap-ci/repo/src/app/resource-pool/services/resource-pool.js","sourcesContent":["import {Behavior} from 'aurelia-framework';\n\nexport class ResourcePool {\n  constructor() {\n    this.pools = {};\n  }\n\n  get(poolName, name, create) {\n    const resources = this._getResources(poolName, name);\n    if (resources.length === 0) {\n      return create ? create() : null;\n    } else {\n      return resources.shift();\n    }\n  }\n\n  getAndFree(poolName, name, create) {\n    const resource = this.get(poolName, name, create);\n    this.free(poolName, name, resource);\n    return resource;\n  }\n\n  free(poolName, name, resource) {\n    const resources = this._getResources(poolName, name);\n    resources.push(resource);\n  }\n\n  _getResources(poolName, name) {\n    let pool = this.pools[poolName];\n    if (!pool) {\n      pool = this.pools[poolName] = {};\n    }\n\n    let resources = pool[name];\n    if (!resources) {\n      resources = pool[name] = [];\n    }\n\n    return resources;\n  }\n}"]}